{% extends 'base.html' %} {% block enfant %}

<section class="dashboard">
  <div class="top">
    <i class="uil uil-bars sidebar-toggle"></i>

    <div class="search-box">
      <i class="uil uil-search"></i>
      <input type="text" placeholder="Recherchez ici..." />
    </div>

    <img src="images/profile.jpg" alt="" />
  </div>



  <div class="dash-content">
    <div class="overview">
      <div class="title">
        <i class="uil uil-tachometer-fast-alt"></i>
        <span class="text">Tableau de bord</span>
      </div>

      <div class="boxes">
        <div class="box box3">
          <i class="uil uil-share"></i>
          <span class="text">Utilisateur</span>
          <span class="number">{{resultat1[0]}}</span>
        </div>
        <div class="box box1">
          <i class="uil uil-thumbs-up"></i>
          <span class="text">Total mise en vente</span>
          <span class="number">{{resultat4[0]}}</span>
        </div>
        <div class="box box2">
          <i class="uil uil-comments"></i>
          <span class="text">Total mise en location</span>
          <span class="number">{{resultat3[0]}}</span>
        </div>
      </div>
    </div>

    <div class="activity">
      <div class="title">
        <i class="uil uil-clock-three"></i>
        <span class="text"> Liste des utilisateurs</span>
      </div>

      <div class="activity-data">
        <div class="data names">
          <span class="data-title">Id Utilisateur</span>
          {% for ligne in resultat %}
          <span class="data-list">{{ligne[0]}}</span>
          {% endfor %}
        </div>
        <div class="data email">
          <span class="data-title">Nom et Prénom</span>
          {% for ligne in resultat %}
          <span class="data-list">{{ligne[1]}}</span>
          {% endfor %}
        </div>
        <div class="data joined">
          <span class="data-title">Email</span>
          {% for ligne in resultat %}
          <span class="data-list">{{ligne[2]}}</span>
          {% endfor %}
        </div>
        <div class="data status">
          <span class="data-title">Adresse</span>
          {% for ligne in resultat %}
          <span class="data-list">{{ligne[4]}}</span>
          {% endfor %}
        </div>
        <div class="data status">
          <span class="data-title">Téléphone</span>
          {% for ligne in resultat %}
          <span class="data-list">{{ligne[5]}}</span>
          {% endfor %}
        </div>
        <div class="data status">
          <a href="#" type="button" class="btn btn-danger"
            ><i class="fa-solid fa-trash"></i
          ></a>
        </div>
      </div>
    </div>

    <div class="activity">
      <div class="title">
        <i class="uil uil-clock-three"></i>
        <span class="text"> Mise en location recentes</span>
      </div>

      <div class="activity-data">
        <div class="data names">
          <span class="data-title">IdLocation</span>
          {% for ligne in resultat2 %}
          <span class="data-list">{{ligne[0]}}</span>
          {% endfor %}
        </div>
        <div class="data email">
          <span class="data-title">Propriétaire</span>
          {% for ligne in resultat2 %}
          <span class="data-list">{{ligne[1]}}</span>
          {% endfor %}
        </div>
        <div class="data joined">
          <span class="data-title">Ville</span>
          {% for ligne in resultat2 %}
          <span class="data-list">{{ligne[2]}}</span>
          {% endfor %}
        </div>
        <div class="data status">
          <span class="data-title">Commune</span>
          {% for ligne in resultat2 %}
          <span class="data-list">{{ligne[3]}}</span>
          {% endfor %}
        </div>
        <div class="data status">
          <span class="data-title">Maison</span>
          {% for ligne in resultat2 %}
          <span class="data-list">{{ligne[4]}}</span>
          {% endfor %}
        </div>
        <div class="data status">
          <span class="data-title">Description</span>
          {% for ligne in resultat2 %}
          <span class="data-list">{{ligne[5]}}</span>
          {% endfor %}
        </div>
        <div class="data status">
          <a href="#" type="button" class="btn btn-danger"
            ><i class="fa-solid fa-trash"></i
          ></a>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="dashboard">
    <h1 class="mb-4">Analyse des Données</h1>

    <!-- Analyse des Utilisateurs -->
    <div class="card mb-4">
      <div class="card-header">
        <h2>Analyse des Utilisateurs</h2>
      </div>
      <div class="card-body">
        <button
          class="btn btn-primary mb-3"
          onclick="loadChart('utilisateurs_par_ville', 'userChart')"
        >
          Distribution des Utilisateurs par Ville
        </button>
        <button
          class="btn btn-primary mb-3"
          onclick="loadChart('types_actions', 'userChart')"
        >
          Types d'Actions les Plus Courantes
        </button>
        <canvas id="userChart" width="400" height="200"></canvas>
      </div>
    </div>

    <!-- Analyse des Propriétés et Interactions Utilisateur -->
    <div class="card mb-4">
      <div class="card-header">
        <h2>Analyse des Propriétés et Interactions Utilisateur</h2>
      </div>
      <div class="card-body">
        <!-- Section Propriétés -->
        <h3>Analyse des Propriétés (Maisons et Locations)</h3>
        <!-- <button onclick="loadChart('repartition_proprietes', 'propertyMap')">
          Répartition des Propriétés par Ville et Commune
        </button> -->
        <div style="width: 100%; height: 500px"><div id="propertyMap"style="width: 100%; height: 100%"></div></div>
        
        <button
          class="btn btn-primary mb-3"
          onclick="loadChart('popularite_proprietes', 'propertyChart')"
        >
          Popularité des Propriétés
        </button>
        <button
          class="btn btn-primary mb-3"
          onclick="loadChart('analyse_prix_maison', 'propertyChart')"
        >
          Analyse des Prix des Maisons en Vente
        </button>
        <button
          class="btn btn-primary mb-3"
          onclick="loadChart('analyse_prix_location', 'propertyChart')"
        >
          Analyse des Prix des Maisons en Location
        </button>
        <canvas id="propertyChart" width="400" height="200"></canvas>

        <!-- Section Interactions Utilisateur -->
        <h3 class="mt-4">Analyse des Interactions Utilisateur (user_like)</h3>
        <button
          class="btn btn-primary mb-3"
          onclick="loadChart('location_populaires', 'interactionChart')"
        >
          Locations les Plus Appréciées
        </button>
        <button
          class="btn btn-primary mb-3"
          onclick="loadChart('maisons_populaires', 'interactionChart')"
        >
          Maisons les Plus Appréciées
        </button>
        <canvas id="interactionChart" width="400" height="200"></canvas>
      </div>
    </div>

    <!-- Analyse des Demandes de Services -->
    <div class="card mb-4">
      <div class="card-header">
        <h2>Analyse des Demandes de Services</h2>
      </div>
      <div class="card-body">
        <button
          class="btn btn-primary mb-3"
          onclick="loadChart('demande_services_par_type', 'serviceChart')"
        >
          Demande de Services par Type
        </button>
        <button
          class="btn btn-primary mb-3"
          onclick="loadChart('statut_services_demandes', 'serviceChart')"
        >
          Statut des Services Demandés
        </button>
        <canvas id="serviceChart" width="400" height="200"></canvas>
      </div>
    </div>
</section>

<section class="dashboard">
  <div class="dash-content">
    <div class="activity">
      <div class="title">
        <i class="uil uil-clock-three"></i>
        <span class="text">Anononce mise en ventes recentes</span>
      </div>

      <div class="activity-data">
        <div class="data names">
          <span class="data-title">Name</span>
          <span class="data-list">Prem Shahi</span>
          <span class="data-list">Deepa Chand</span>
          <span class="data-list">Manisha Chand</span>
          <span class="data-list">Pratima Shahi</span>
          <span class="data-list">Man Shahi</span>
          <span class="data-list">Ganesh Chand</span>
          <span class="data-list">Bikash Chand</span>
        </div>
        <div class="data email">
          <span class="data-title">Email</span>
          <span class="data-list">premshahi@gmail.com</span>
          <span class="data-list">deepachand@gmail.com</span>
          <span class="data-list">prakashhai@gmail.com</span>
          <span class="data-list">manishachand@gmail.com</span>
          <span class="data-list">pratimashhai@gmail.com</span>
          <span class="data-list">manshahi@gmail.com</span>
          <span class="data-list">ganeshchand@gmail.com</span>
        </div>
        <div class="data joined">
          <span class="data-title">Joined</span>
          <span class="data-list">2022-02-12</span>
          <span class="data-list">2022-02-12</span>
          <span class="data-list">2022-02-13</span>
          <span class="data-list">2022-02-13</span>
          <span class="data-list">2022-02-14</span>
          <span class="data-list">2022-02-14</span>
          <span class="data-list">2022-02-15</span>
        </div>
        <div class="data type">
          <span class="data-title">Type</span>
          <span class="data-list">New</span>
          <span class="data-list">Member</span>
          <span class="data-list">Member</span>
          <span class="data-list">New</span>
          <span class="data-list">Member</span>
          <span class="data-list">New</span>
          <span class="data-list">Member</span>
        </div>
        <div class="data status">
          <span class="data-title">Status</span>
          <span class="data-list">Liked</span>
          <span class="data-list">Liked</span>
          <span class="data-list">Liked</span>
          <span class="data-list">Liked</span>
          <span class="data-list">Liked</span>
          <span class="data-list">Liked</span>
          <span class="data-list">Liked</span>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="dashboard">
  <div class="dash-content">
    <div class="activity">
      <div class="title">
        <i class="uil uil-clock-three"></i>
        <span class="text">Service</span>
      </div>
      <div class="activity-data">
        <div class="data names">
          <span class="data-title">Name</span>
          <span class="data-list">Prem Shahi</span>
          <span class="data-list">Deepa Chand</span>
          <span class="data-list">Manisha Chand</span>
          <span class="data-list">Pratima Shahi</span>
          <span class="data-list">Man Shahi</span>
          <span class="data-list">Ganesh Chand</span>
          <span class="data-list">Bikash Chand</span>
        </div>
        <div class="data email">
          <span class="data-title">Email</span>
          <span class="data-list">premshahi@gmail.com</span>
          <span class="data-list">deepachand@gmail.com</span>
          <span class="data-list">prakashhai@gmail.com</span>
          <span class="data-list">manishachand@gmail.com</span>
          <span class="data-list">pratimashhai@gmail.com</span>
          <span class="data-list">manshahi@gmail.com</span>
          <span class="data-list">ganeshchand@gmail.com</span>
        </div>
        <div class="data joined">
          <span class="data-title">Joined</span>
          <span class="data-list">2022-02-12</span>
          <span class="data-list">2022-02-12</span>
          <span class="data-list">2022-02-13</span>
          <span class="data-list">2022-02-13</span>
          <span class="data-list">2022-02-14</span>
          <span class="data-list">2022-02-14</span>
          <span class="data-list">2022-02-15</span>
        </div>
        <div class="data type">
          <span class="data-title">Type</span>
          <span class="data-list">New</span>
          <span class="data-list">Member</span>
          <span class="data-list">Member</span>
          <span class="data-list">New</span>
          <span class="data-list">Member</span>
          <span class="data-list">New</span>
          <span class="data-list">Member</span>
        </div>
        <div class="data status">
          <span class="data-title">Status</span>
          <span class="data-list">Liked</span>
          <span class="data-list">Liked</span>
          <span class="data-list">Liked</span>
          <span class="data-list">Liked</span>
          <span class="data-list">Liked</span>
          <span class="data-list">Liked</span>
          <span class="data-list">Liked</span>
        </div>
      </div>
    </div>
  </div>
</section>

{% endblock %}
